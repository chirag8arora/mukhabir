"use strict";angular.module("theme.services",[]).service("$global",["$rootScope","EnquireService","$document",function($rootScope,EnquireService,$document){this.settings={fixedHeader:!0,headerBarHidden:!0,leftbarCollapsed:!1,leftbarShown:!1,rightbarCollapsed:!1,fullscreen:!1,layoutHorizontal:!1,layoutHorizontalLargeIcons:!1,layoutBoxed:!1,showSearchCollapsed:!1};var brandColors={"default":"#ecf0f1",inverse:"#95a5a6",primary:"#3498db",success:"#2ecc71",warning:"#f1c40f",danger:"#e74c3c",info:"#1abcaf",brown:"#c0392b",indigo:"#9b59b6",orange:"#e67e22",midnightblue:"#34495e",sky:"#82c4e6",magenta:"#e73c68",purple:"#e044ab",green:"#16a085",grape:"#7a869c",toyo:"#556b8d",alizarin:"#e74c3c"};this.getBrandColor=function(name){return brandColors[name]?brandColors[name]:brandColors["default"]},$document.ready(function(){EnquireService.register("screen and (max-width: 767px)",{match:function(){$rootScope.$broadcast("globalStyles:maxWidth767",!0)},unmatch:function(){$rootScope.$broadcast("globalStyles:maxWidth767",!1)}})}),this.get=function(key){return this.settings[key]},this.set=function(key,value){this.settings[key]=value,$rootScope.$broadcast("globalStyles:changed",{key:key,value:this.settings[key]}),$rootScope.$broadcast("globalStyles:changed:"+key,this.settings[key])},this.values=function(){return this.settings}}]).factory("pinesNotifications",function(){return{notify:function(args){var notification=new PNotify(args);return notification.notify=notification.update,notification}}}).factory("progressLoader",function(){return{start:function(){$(document).skylo("start")},set:function(position){$(document).skylo("set",position)},end:function(){$(document).skylo("end")},get:function(){return $(document).skylo("get")},inch:function(amount){$(document).skylo("show",function(){$(document).skylo("inch",amount)})}}}).factory("EnquireService",["$window",function($window){return $window.enquire}]).factory("$bootbox",["$modal",function($modal){return void 0==$.fn.modal&&($.fn.modal=function(directive){var that=this;if("hide"==directive)return void(this.data("bs.modal")&&(this.data("bs.modal").close(),$(that).remove()));if("show"!=directive){var modalInstance=$modal.open({template:$(this).find(".modal-content").html()});this.data("bs.modal",modalInstance),setTimeout(function(){$(".modal.ng-isolate-scope").remove(),$(that).css({opacity:1,display:"block"}).addClass("in")},100)}}),bootbox}]).service("lazyLoad",["$q","$timeout",function($q,$t){var deferred=$q.defer(),promise=deferred.promise;this.load=function(files){return angular.forEach(files,function(file){file.indexOf(".js")>-1&&!function(d,script){var fDeferred=$q.defer();script=d.createElement("script"),script.type="text/javascript",script.async=!0,script.onload=function(){$t(function(){fDeferred.resolve()})},script.onerror=function(){$t(function(){fDeferred.reject()})},promise=promise.then(function(){return script.src=file,d.getElementsByTagName("head")[0].appendChild(script),fDeferred.promise})}(document)}),deferred.resolve(),promise}}]).filter("safe_html",["$sce",function($sce){return function(val){return $sce.trustAsHtml(val)}}]),angular.module("theme.directives",[]).directive("disableAnimation",["$animate",function($animate){return{restrict:"A",link:function($scope,$element,$attrs){$attrs.$observe("disableAnimation",function(value){$animate.enabled(!value,$element)})}}}]).directive("slideOut",function(){return{restrict:"A",scope:{show:"=slideOut"},link:function(scope,element,attr){element.hide(),scope.$watch("show",function(newVal,oldVal){newVal!==oldVal&&element.slideToggle({complete:function(){scope.$apply()}})})}}}).directive("slideOutNav",["$timeout",function($t){return{restrict:"A",scope:{show:"=slideOutNav"},link:function(scope,element,attr){scope.$watch("show",function(newVal,oldVal){return $("body").hasClass("collapse-leftbar")?void(1==newVal?element.css("display","block"):element.css("display","none")):void(1==newVal?element.slideDown({complete:function(){$t(function(){scope.$apply()})}}):0==newVal&&element.slideUp({complete:function(){$t(function(){scope.$apply()})}}))})}}}]).directive("panel",function(){return{restrict:"E",transclude:!0,scope:{panelClass:"@",heading:"@",panelIcon:"@"},templateUrl:"templates/panel.html"}}).directive("pulsate",function(){return{scope:{pulsate:"="},link:function(scope,element,attr){"transparent"==element.css("background-color")&&element.css("background-color","rgba(0,0,0,0.01)"),$(element).pulsate(scope.pulsate)}}}).directive("prettyprint",function(){return{restrict:"C",link:function(scope,element,attrs){element.html(prettyPrintOne(element.html(),"",!0))}}}).directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(scope,element,attrs,ctrl){scope.$watch(function(){var combined;return(scope.passwordVerify||ctrl.$viewValue)&&(combined=scope.passwordVerify+"_"+ctrl.$viewValue),combined},function(value){value&&ctrl.$parsers.unshift(function(viewValue){var origin=scope.passwordVerify;return origin!==viewValue?void ctrl.$setValidity("passwordVerify",!1):(ctrl.$setValidity("passwordVerify",!0),viewValue)})})}}}).directive("backgroundSwitcher",function(){return{restrict:"EA",link:function(scope,element,attr){$(element).click(function(){$("body").css("background",$(element).css("background"))})}}}).directive("panelControls",[function(){return{restrict:"E",require:"?^tabset",link:function(scope,element,attrs,tabsetCtrl){var panel=$(element).closest(".panel");0==panel.hasClass(".ng-isolate-scope")&&$(element).appendTo(panel.find(".options"))}}}]).directive("panelControlCollapse",function(){return{restrict:"EAC",link:function(scope,element,attr){return element.bind("click",function(){$(element).toggleClass("fa-chevron-down fa-chevron-up"),$(element).closest(".panel").find(".panel-body").slideToggle({duration:200}),$(element).closest(".panel-heading").toggleClass("rounded-bottom")}),!1}}}).directive("icheck",function($timeout,$parse){return{require:"?ngModel",link:function($scope,element,$attrs,ngModel){return $timeout(function(){var parentLabel=element.parent("label");parentLabel.length&&parentLabel.addClass("icheck-label");var value;return value=$attrs.value,$scope.$watch($attrs.ngModel,function(newValue){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}).on("ifChanged",function(event){return"checkbox"===$(element).attr("type")&&$attrs.ngModel&&$scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)}),"radio"===$(element).attr("type")&&$attrs.ngModel?$scope.$apply(function(){return ngModel.$setViewValue(value)}):void 0})})}}}).directive("knob",function(){return{restrict:"EA",template:'<input class="dial" type="text"/>',scope:{options:"="},replace:!0,link:function(scope,element,attr){$(element).knob(scope.options)}}}).directive("uiBsSlider",["$timeout",function($timeout){return{link:function(scope,element,attr){$timeout(function(){element.slider()})}}}]).directive("tileLarge",function(){return{restrict:"E",scope:{item:"=data"},templateUrl:"templates/tile-large.html",replace:!0,transclude:!0}}).directive("tileMini",function(){return{restrict:"E",scope:{item:"=data"},replace:!0,templateUrl:"templates/tile-mini.html"}}).directive("tile",function(){return{restrict:"E",scope:{heading:"@",type:"@"},transclude:!0,templateUrl:"templates/tile-generic.html",link:function(scope,element,attr){var heading=element.find("tile-heading");heading.length&&heading.appendTo(element.find(".tiles-heading"))},replace:!0}}).directive("jscrollpane",["$timeout",function($timeout){return{restrict:"A",scope:{options:"=jscrollpane"},link:function(scope,element,attr){$timeout(function(){-1!=navigator.appVersion.indexOf("Win")?element.jScrollPane($.extend({mouseWheelSpeed:20},scope.options)):element.jScrollPane(scope.options),element.on("click",".jspVerticalBar",function(event){event.preventDefault(),event.stopPropagation()}),element.bind("mousewheel",function(e){e.preventDefault()})})}}}]).directive("stickyScroll",function(){return{restrict:"A",link:function(scope,element,attr){function stickyTop(){var topMax=parseInt(attr.stickyScroll),headerHeight=$("header").height();if(headerHeight>topMax&&(topMax=headerHeight),0==$("body").hasClass("static-header"))return element.css("top",topMax+"px");var window_top=$(window).scrollTop();element.offset().top;topMax>window_top?element.css("top",topMax-window_top+"px"):element.css("top","0px")}$(function(){$(window).scroll(stickyTop),stickyTop()})}}}).directive("rightbarRightPosition",function(){return{restrict:"A",scope:{isFixedLayout:"=rightbarRightPosition"},link:function(scope,element,attr){scope.$watch("isFixedLayout",function(newVal,oldVal){newVal!=oldVal&&setTimeout(function(){var $pc=$("#page-content"),ending_right=$(window).width()-($pc.offset().left+$pc.outerWidth());0>ending_right&&(ending_right=0),$("#page-rightbar").css("right",ending_right)},100)})}}}).directive("fitHeight",["$window","$timeout","$location",function($window,$timeout,$location){return{restrict:"A",scope:!0,link:function(scope,element,attr){scope.docHeight=$(document).height();var setHeight=function(newVal){var diff=$("header").height();$("body").hasClass("layout-horizontal")&&(diff+=112),newVal-diff>element.outerHeight()?element.css("min-height",newVal-diff+"px"):element.css("min-height",$(window).height()-diff)};scope.$watch("docHeight",function(newVal,oldVal){setHeight(newVal)}),$(window).on("resize",function(){setHeight($(document).height())});var resetHeight=function(){scope.docHeight=$(document).height(),$timeout(resetHeight,1e3)};$timeout(resetHeight,1e3)}}}]).directive("jscrollpaneOn",["$timeout",function($timeout){return{restrict:"A",scope:{applyon:"=jscrollpaneOn"},link:function(scope,element,attr){scope.$watch("applyon",function(newVal){if(0==newVal){var api=element.data("jsp");return void(api&&api.destroy())}$timeout(function(){element.jScrollPane({autoReinitialise:!0})})})}}}]).directive("backToTop",function(){return{restrict:"AE",link:function(scope,element,attr){element.click(function(e){$("body").scrollTop(0)})}}}),angular.module("theme.google_maps",[]).controller("GMapsController",["$scope",function($scope){}]),angular.module("theme.ui-tiles",[]).controller("TilesController",["$scope","$global",function($scope,$global){$scope.$global=$global,$scope.largeTiles=[{title:"Page Views",titleBarInfo:"-7.6%",text:"1.6K",color:"info",classes:"fa fa-eye"},{title:"Likes",titleBarInfo:"+15.4%",text:"345",color:"orange",classes:"fa fa-thumbs-o-up"},{title:"Bugs Fixed",titleBarInfo:"+10.4%",text:"21",color:"danger",classes:"fa fa-check-square"},{title:"New Members",titleBarInfo:"+25.4%",text:"124",color:"midnightblue",classes:"fa fa-group"},{title:"Gifts",titleBarInfo:"+15.4%",text:"16",color:"purple",classes:"fa fa-gift"},{title:"Profits",titleBarInfo:"+17.4%",text:"$2.5k",color:"success",classes:"fa fa-money"},{title:"Sales Revenue",titleBarInfo:"+24.4%",text:"$30.2k",color:"primary",classes:"fa fa-shopping-cart"},{title:"New Orders",titleBarInfo:"+15.4%",text:"679",color:"indigo",classes:"fa fa-comments"},{title:"Comments",titleBarInfo:"+22.4%",text:"32",color:"green",classes:"fa fa-comments"},{title:"Downloads",titleBarInfo:"+16.4%",text:"6.7K",color:"danger",classes:"fa fa-download"},{title:"Tasks",titleBarInfo:"+26.4%",text:"17",color:"magenta",classes:"fa fa-tasks"},{title:"Videos",titleBarInfo:"+6.4%",text:"31",color:"inverse",classes:"fa fa-video-camera"}],$scope.miniTiles=[{text:"Page Views",titleBarInfo:"7",color:"info",classes:"fa fa-eye"},{text:"Likes",titleBarInfo:"15",color:"orange",classes:"fa fa-thumbs-o-up"},{text:"Bugs Fixed",titleBarInfo:"+10",color:"danger",classes:"fa fa-check-square"},{text:"New Members",titleBarInfo:"+25",color:"midnightblue",classes:"fa fa-group"},{text:"Gifts",titleBarInfo:"15",color:"purple",classes:"fa fa-gift"},{text:"Profits",titleBarInfo:"17",color:"success",classes:"fa fa-money"},{text:"Sales Revenue",titleBarInfo:"24",color:"primary",classes:"fa fa-shopping-cart"},{text:"New Orders",titleBarInfo:"15",color:"indigo",classes:"fa fa-comments"},{text:"Comments",titleBarInfo:"22",color:"green",classes:"fa fa-comments"},{text:"Downloads",titleBarInfo:"16",color:"danger",classes:"fa fa-download"},{text:"Tasks",titleBarInfo:"26",color:"magenta",classes:"fa fa-tasks"},{text:"Videos",titleBarInfo:"4",color:"inverse",classes:"fa fa-video-camera"}]}]),angular.module("theme.ui-alerts",[]).controller("AlertsController",["$scope","pinesNotifications",function($scope,pinesNotifications){$scope.alerts=[{type:"success",msg:"<strong>Well done!</strong> You successfully read this important alert message."},{type:"warning",msg:"<strong>Warning!</strong> Best check yo self, you're not looking too good."},{type:"info",msg:"<strong>Heads up!</strong> This alert needs your attention, but it's not super important."},{type:"danger",msg:"<strong>Oh snap!</strong> Change a few things up and try submitting again."}],$scope.addAlert=function(){var types=["info","warning","danger","success"];$scope.alerts.push({msg:"Alerts can be added dynamically!",type:_.shuffle(types).shift()})},$scope.closeAlert=function(index){$scope.alerts.splice(index,1)},$scope.simpleInfo=function(){pinesNotifications.notify({title:"New Thing",text:"Just to let you know, something happened.",type:"info"})},$scope.simpleSuccess=function(){pinesNotifications.notify({title:"New Thing",text:"Just to let you know, something happened.",type:"success"})},$scope.simpleError=function(){pinesNotifications.notify({title:"New Thing",text:"Just to let you know, something happened.",type:"error"})},$scope.stickyInfo=function(){pinesNotifications.notify({title:"Sticky Info",text:"Sticky info, you know, like a newspaper covered in honey.",type:"info",hide:!1})},$scope.stickySuccess=function(){pinesNotifications.notify({title:"Sticky Success",text:"Sticky success... I'm not even gonna make a joke.",type:"success",hide:!1})},$scope.stickyError=function(){pinesNotifications.notify({title:"Uh Oh!",text:"Something really terrible happened. You really need to read this, so I won't close automatically.",type:"error",hide:!1})},$scope.bigNotice=function(){pinesNotifications.notify({title:"Big Notice",text:"Check me out! I'm tall and wide, even though my text isn't.",width:"500px",type:"error",min_height:"400px"})},$scope.showRich=function(){pinesNotifications.notify({title:'<span style="color: red;">Rich Content Notice</span>',type:"success",text:'<span style="color: blue;">Look at my beautiful <strong>strong</strong>, <em>emphasized</em>, and <span style="font-size: 1.5em;">large</span> text.</span>'})},$scope.showDynamic=function(){var percent=0,notice=pinesNotifications.notify({title:"Please Wait",type:"info",icon:"fa fa-spin fa-refresh",hide:!1,closer:!1,sticker:!1,opacity:.75,shadow:!1,width:"200px"});setTimeout(function(){notice.notify({title:!1});var interval=setInterval(function(){percent+=2;var options={text:percent+"% complete."};80==percent&&(options.title="Almost There"),percent>=100&&(window.clearInterval(interval),options.title="Done!",options.type="success",options.hide=!0,options.closer=!0,options.sticker=!0,options.icon="fa fa-check",options.opacity=1,options.shadow=!0),notice.notify(options)},120)},2e3)},$scope.showNoHistory=function(){pinesNotifications.notify({title:"No History Notice",text:"I'm not part of the notice history, so if you redisplay the last message, it won't be me.",history:!1,type:"error"})},$scope.showNoSticky=function(){pinesNotifications.notify({title:"No Sticky Button Notice",text:"Check me out! I'm a sticky notice with no unsticky button. You'll have to close me yourself.",hide:!1,sticker:!1,type:"error"})},$scope.showPermanent=function(){pinesNotifications.notify({title:"Permanent Buttons Notice",text:"My buttons are really lonely, so they're gonna hang out with us.",closer_hover:!1,sticker_hover:!1,type:"error"})},$scope.showNoMouseReset=function(){pinesNotifications.notify({title:"No Mouse Reset Notice",text:"I don't care if you move your mouse over me, I'll disappear when I want.",mouse_reset:!1,type:"error"})},$scope.showChanging=function(){pinesNotifications.notify({title:"Notice",type:"error",text:"Right now I'm a notice.",before_close:function(notification){return notification.notify({title:"Error",text:"Uh oh. Now I've become an error.",type:"error",before_close:function(notification){return notification.notify({title:"Success",text:"I fixed the error!",type:"success",before_close:function(notification){return notification.notify({title:"Info",text:"Everything's cool now.",type:"info",before_close:null}),notification.queueRemove(),!1}}),notification.queueRemove(),!1}}),notification.queueRemove(),!1}})}}]),angular.module("theme.ui-progressbars",[]).controller("ProgressbarController",["$scope",function($scope){$scope.rootPanels=[{active:!1},{active:!0}],$scope.max=200,$scope.random=function(){var type,value=Math.floor(100*Math.random()+1);type=25>value?"success":50>value?"info":75>value?"warning":"danger",$scope.showWarning="danger"===type||"warning"===type,$scope.dynamic=value,$scope.type=type},$scope.random(),$scope.randomStacked=function(){$scope.stacked=[];for(var types=["success","info","warning","danger"],i=0,n=Math.floor(4*Math.random()+1);n>i;i++){var index=Math.floor(4*Math.random());$scope.stacked.push({value:Math.floor(30*Math.random()+1),type:types[index]})}},$scope.randomStacked()}]),angular.module("theme.ui-paginations",[]).controller("PaginationAndPagingController",["$scope",function($scope){$scope.totalItems=64,$scope.currentPage=4,$scope.pageChanged=function(){console.log("Page changed to: "+$scope.currentPage)},$scope.maxSize=5,$scope.bigTotalItems=175,$scope.bigCurrentPage=1,$scope.dpWithCallback={onSelectedDateChanged:function(event,date){alert("Selected date: "+moment(date).format("Do, MMM YYYY"))}}}]).directive("datepaginator",function(){return{restrict:"A",scope:{options:"=datepaginator"},link:function(scope,element,attr){setTimeout(function(){element.datepaginator(scope.options)},10)}}}),angular.module("theme.ui-tables-basic",[]).controller("TablesBasicController",["$scope","$filter",function($scope,$filter){$scope.data={headings:["#","First Name","Last Name","Username"],rows:[["1","Mark","Otto","@mdo"],["2","Jacob","Thornton","@fat"],["3","Larry","the Bird","@twitter"]]}}]),angular.module("theme.ui-panels",[]).controller("PanelsController",["$scope","$timeout",function($scope,$timeout){$scope.rootPanels=[{active:!1},{active:!0}],$scope.alert=function(a){console.log(a)},$scope.demoPanelClass="panel-sky",$scope.demoPanelHeading="Simple Panel Heading",$scope.demoTabbedPanelClass="panel-danger",$scope.demoTabbedPanelHeading="Tabbed Panel Heading",$scope.demoPanelIcon="fa fa-fw fa-cog",$scope.demoDynamicIcons=function(){$scope.demoPanelIcon="fa fa-fw fa-spinner fa-spin",$timeout(function(){$scope.demoPanelIcon="fa fa-fw fa-tasks"},1500)}}]),angular.module("theme.form-components",[]).controller("DateRangePickerDemo",["$scope",function($scope){$scope.drp_start=moment().subtract("days",1).format("MMMM D, YYYY"),$scope.drp_end=moment().add("days",31).format("MMMM D, YYYY"),$scope.drp_options={ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},opens:"left",startDate:moment().subtract("days",29),endDate:moment()}}]),angular.module("theme.form-directives",[]).directive("autosize",function(){return{restrict:"AC",link:function(scope,element,attr){element.autosize({append:"\n"})}}}).directive("fullscreen",function(){return{restrict:"AC",link:function(scope,element,attr){element.fseditor({maxHeight:500})}}}).directive("colorpicker",function(){return{restrict:"AC",link:function(scope,element,attr){element.colorpicker()}}}).directive("daterangepicker",function(){return{restrict:"A",scope:{options:"=daterangepicker",start:"=dateBegin",end:"=dateEnd"},link:function(scope,element,attr){element.daterangepicker(scope.options,function(start,end){scope.start&&(scope.start=start.format("MMMM D, YYYY")),scope.end&&(scope.end=end.format("MMMM D, YYYY")),scope.$apply()})}}}).directive("multiselect",["$timeout",function($t){return{restrict:"A",link:function(scope,element,attr){$t(function(){element.multiSelect()})}}}]).directive("wizard",function(){return{restrict:"A",scope:{options:"=wizard"},link:function(scope,element,attr){scope.options?(element.stepy(scope.options),1==scope.options.validate&&element.validate({errorClass:"help-block",validClass:"help-block",highlight:function(element,errorClass,validClass){$(element).closest(".form-group").addClass("has-error")},unhighlight:function(element,errorClass,validClass){$(element).closest(".form-group").removeClass("has-error")}})):element.stepy(),element.find(".stepy-navigator").wrapInner('<div class="pull-right"></div>')}}}).directive("maskinput",function(){return{restrict:"A",link:function(scope,element,attr){element.inputmask()}}}).directive("wysiwygCkeditor",function(){return{restrict:"A",scope:{options:"=wysiwygCkeditor"},link:function(scope,element,attr){return scope.options&&1==scope.options.inline?CKEDITOR.inline(attr.name||attr.id,scope.options):void CKEDITOR.replace(attr.name||attr.id,scope.options)}}}),angular.module("theme.form-validation",[]).controller("AngularFormValidationController",["$scope",function($scope){$scope.validateDemoForm={};angular.copy($scope.validateDemoForm);$scope.canResetValidationForm=function(){return $scope.validate_demo_form.$dirty},$scope.resetValidationForm=function(){$scope.validateDemoForm=angular.copy($scope.validateDemoFormOriginal),$scope.validate_demo_form.$setPristine()},$scope.canSubmitValidationForm=function(){return $scope.validate_demo_form.$valid},$scope.submit=function(){}}]),angular.module("theme.form-inline",[]).controller("InlineEditableController",["$scope","$filter","$http","$timeout",function($scope,$filter,$http,$timeout){$scope.user={name:"awesome user",status:2,group:4,groupName:"admin",email:"email@example.com",tel:"123-45-67",number:29,range:10,url:"http://example.com",search:"blabla",color:"#6a4415",date:null,time:"12:30",datetime:null,month:null,week:null,desc:"Awesome user \ndescription!",remember:!0,dob:new Date(1984,4,15),timebs:new Date(1984,4,15,19,20)},$scope.statuses=[{value:1,text:"status1"},{value:2,text:"status2"},{value:3,text:"status3"},{value:4,text:"status4"}],$scope.showStatus=function(){var selected=$filter("filter")($scope.statuses,{value:$scope.user.status});return $scope.user.status&&selected.length?selected[0].text:"Not set"},$scope.groups=[{id:1,text:"MVP"},{id:2,text:"VIP"},{id:3,text:"ADMIN"},{id:4,text:"USER"}],$scope.$watch("user.group",function(newVal,oldVal){if(newVal!==oldVal){var selected=$filter("filter")($scope.groups,{id:$scope.user.group});$scope.user.groupName=selected.length?selected[0].text:null}})}]),angular.module("theme.form-uploads",["flow"]).config(["flowFactoryProvider",function(flowFactoryProvider){flowFactoryProvider.defaults={target:"",permanentErrors:[500,501],maxChunkRetries:1,chunkRetryInterval:5e3,simultaneousUploads:1},flowFactoryProvider.on("catchAll",function(event){console.log("catchAll",arguments)})}]),angular.module("theme.tables-ng-grid",[]).controller("TablesAdvancedController",["$scope","$filter","$http",function($scope,$filter,$http){$scope.filterOptions={filterText:"",useExternalFilter:!0},$scope.totalServerItems=0,$scope.pagingOptions={pageSizes:[25,50,100],pageSize:25,currentPage:1},$scope.setPagingData=function(data,page,pageSize){var pagedData=data.slice((page-1)*pageSize,page*pageSize);$scope.myData=pagedData,$scope.totalServerItems=data.length,$scope.$$phase||$scope.$apply()},$scope.getPagedDataAsync=function(pageSize,page,searchText){setTimeout(function(){var data;if(searchText){var ft=searchText.toLowerCase();$http.get("assets/demo/ng-data.json").success(function(largeLoad){data=largeLoad.filter(function(item){return-1!=JSON.stringify(item).toLowerCase().indexOf(ft)}),$scope.setPagingData(data,page,pageSize)})}else $http.get("assets/demo/ng-data.json").success(function(largeLoad){$scope.setPagingData(largeLoad,page,pageSize)})},100)},$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage),$scope.$watch("pagingOptions",function(newVal,oldVal){newVal!==oldVal&&newVal.currentPage!==oldVal.currentPage&&$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage,$scope.filterOptions.filterText)},!0),$scope.$watch("filterOptions",function(newVal,oldVal){newVal!==oldVal&&$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage,$scope.filterOptions.filterText)},!0),$scope.gridOptions={data:"myData",enablePaging:!0,showFooter:!0,totalServerItems:"totalServerItems",pagingOptions:$scope.pagingOptions,filterOptions:$scope.filterOptions}}]),angular.module("theme.tables-editable",[]).controller("TablesEditableController",["$scope","$filter",function($scope,$filter){$scope.users=[{id:1,name:"awesome user1",phone:2,IMEI:4,model:"admin"},{id:2,name:"awesome user1",phone:2,IMEI:4,model:"admin"},{id:3,name:"awesome user1",phone:2,IMEI:4,model:"admin"}],$scope.saveUser=function(data,id){angular.extend(data,{id:id})},$scope.removeUser=function(index){$scope.users.splice(index,1)},$scope.addUser=function(){$scope.inserted={id:$scope.users.length+1,name:"",status:null,group:null},$scope.users.push($scope.inserted)}}]),angular.module("theme.pages-controllers",[]).controller("SignupPageController",["$scope","$global","$http","$location",function($scope,$global,$http,$location){$global.set("fullscreen",!0),$scope.$on("$destroy",function(){$global.set("fullscreen",!1)})}]).controller("RegistrationPageController",["$scope","$timeout",function($scope,$timeout){$scope.checking=!1,$scope.checked=!1,$scope.checkAvailability=function(){0!=$scope.reg_form.username.$dirty&&($scope.checking=!0,$timeout(function(){$scope.checking=!1,$scope.checked=!0},500))}}]).controller("ChatRoomController",["$scope","$timeout",function($scope,$t){var eliza=new ElizaBot,avatars=["potter.png","tennant.png","johansson.png","jackson.png","jobs.png"];$scope.messages=[],$scope.userText="",$scope.elizaTyping=!1,$scope.elizaAvatar="johansson.png",$scope.sendMessage=function(msg){var im={"class":"me",avatar:"jackson.png",text:msg};this.messages.push(im),this.userText="",$t(function(){$scope.elizaAvatar=_.shuffle(avatars).shift(),$scope.elizaTyping=!0},500),$t(function(){var reply=eliza.transform(msg),im={"class":"chat-success",avatar:$scope.elizaAvatar,text:reply};$scope.elizaTyping=!1,$scope.messages.push(im)},1200)}}]).directive("scrollToBottom",function(){return{restrict:"A",scope:{model:"=scrollToBottom"},link:function(scope,element,attr){scope.$watch("model",function(n,o){n!=o&&(element[0].scrollTop=element[0].scrollHeight)})}}}),angular.module("theme.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/bs-modal.html",'<div class="modal-header">\n    <h3 class="modal-title">I\'m a modal!</h3>\n</div>\n<div class="modal-body">\n    <ul>\n        <li ng-repeat="item in items">\n            <a ng-click="selected.item = item">{{ item }}</a>\n        </li>\n    </ul>\n    Selected: <b>{{ selected.item }}</b>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n</div>\n'),$templateCache.put("templates/contextual-progressbar.html",'<div class="contextual-progress">\n	<div class="clearfix">\n		<div class="progress-title">{{heading}}</div>\n		<div class="progress-percentage">{{percent | number:0}}%</div>\n	</div>\n	<div class="progress">\n		<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n	</div>\n</div>\n'),$templateCache.put("templates/listview.html",'<div class="row list-view-item" ng-click="focusLocation($event,device)">\r\n    <!--<div class="col-md-12">-->\r\n        <div class="col-md-3">\r\n            <img src="../../assets/demo/avatar/johansson.png">\r\n        </div>\r\n        <div class="col-md-9">\r\n            <h1>{{device.owner}}</h1>\r\n            <span><i class="fa fa-user"></i> {{device.deviceNumber}}</span>\r\n            <span class="pull-right"><i class="fa fa-mobile"></i> {{device.battery}}%</span>\r\n            <p><i class="fa fa-location-arrow"></i> {{device.address}}</p>\r\n        </div>\r\n    <!--</div>-->\r\n</div>'),$templateCache.put("templates/nav_renderer.html",'<a ng-click="select(item)" ng-href="{{item.url}}">\n	<i ng-if="item.iconClasses" class="{{item.iconClasses}}"></i><span>{{item.label}}</span>\n	<span ng-bind-html="item.html"></span>\n</a>\n<ul ng-if="item.children.length" data-slide-out-nav="item.open">\n    <li ng-repeat="item in item.children"\n	    ng-class="{ hasChild: (item.children!==undefined),\n                      active: item.selected,\n                        open: (item.children!==undefined) && item.open }"\n    	ng-include="\'templates/nav_renderer.html\'"\n    ></li>\n</ul>\n'),$templateCache.put("templates/nav_renderer_horizontal.html",'<a ng-click="select(item)" ng-href="{{item.url}}">\n  <i ng-if="item.iconClasses" class="{{item.iconClasses}}"></i><span>{{item.label}}</span>\n  <span ng-bind-html="item.html"></span>\n</a>\n<ul ng-if="item.children.length">\n    <li ng-repeat="item in item.children"\n      ng-class="{ hasChild: (item.children!==undefined),\n                      active: item.selected,\n                        open: (item.children!==undefined) && item.open }"\n      ng-include="\'templates/nav_renderer_horizontal.html\'"\n    ></li>\n</ul>\n'),$templateCache.put("templates/notification.html",'<!--- \r\n Copyright(c) 2015Full Sleeves Technologies Pvt Ltd  \r\n Author Subhendu Singh on 8/29/2015.\r\n -->\r\n<div class="ui-notification">\r\n    <h3 ng-show="title" ng-bind-html="title" style="color: white;"></h3>\r\n    <div class="message" ng-bind-html="message"></div>\r\n</div>'),$templateCache.put("templates/panel-tabs-without-heading.html",'<div class="panel {{panelClass}}">\n  <div class="panel-heading">\n        <h4>\n            <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n        </h4>\n  </div>\n  <div class="panel-body">\n    <div class="tab-content">\n        <div class="tab-pane"\n            ng-repeat="tab in tabs"\n            ng-class="{active: tab.active}"\n            tab-content-transclude="tab">\n        </div>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("templates/panel-tabs.html",'<div class="panel {{panelClass}}">\n  <div class="panel-heading">\n        <h4><i ng-if="panelIcon" class="{{panelIcon}}"></i>{{(panelIcon? " ":"")+heading}}</h4>\n        <div class="options">\n            <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n        </div>\n  </div>\n  <div class="panel-body">\n    <div class="tab-content">\n        <div class="tab-pane"\n            ng-repeat="tab in tabs"\n            ng-class="{active: tab.active}"\n            tab-content-transclude="tab">\n        </div>\n    </div>\n  </div>\n</div>\n'),$templateCache.put("templates/panel.html",'<div class="panel {{panelClass}}">\n  <div class="panel-heading">\n        <h4><i ng-if="panelIcon" class="{{panelIcon}}"></i>{{(panelIcon? " ":"")+heading}}</h4>\n        <div class="options">\n        </div>\n  </div>\n  <div class="panel-body" ng-transclude>\n  </div>\n</div>\n'),
$templateCache.put("templates/themed-tabs-bottom.html",'<div class="tab-container tab-{{theme || \'primary\'}} tab-{{position || \'normal\'}}">\n  <div class="tab-content">\n    <div class="tab-pane"\n        ng-repeat="tab in tabs"\n        ng-class="{active: tab.active}"\n        tab-content-transclude="tab">\n    </div>\n  </div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n</div>\n'),$templateCache.put("templates/themed-tabs.html",'<div class="tab-container tab-{{theme || \'primary\'}} tab-{{position || \'normal\'}}">\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n        ng-repeat="tab in tabs"\n        ng-class="{active: tab.active}"\n        tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n'),$templateCache.put("templates/tile-generic.html",'<div class="info-tiles tiles-{{type}}">\n	<div class="tiles-heading">\n		{{heading}}\n	</div>\n	<div class="tiles-body" ng-transclude>\n	</div>\n</div>\n'),$templateCache.put("templates/tile-large.html",'<a class="info-tiles tiles-{{item.color}}" ng-href="{{item.href}}">\n    <div class="tiles-heading">\n        <div class="pull-left">{{item.title}}</div>\n        <div class="pull-right">{{item.titleBarInfo}}</div>\n    </div>\n    <div class="tiles-body">\n        <div class="pull-left"><i class="{{item.classes}}"></i></div>\n        <div class="pull-right" ng-show="item.text">{{item.text}}</div>\n        <div class="pull-right" ng-show="!item.text" ng-transclude></div>\n    </div>\n</a>\n'),$templateCache.put("templates/tile-mini.html",'<a class="shortcut-tiles tiles-{{item.color}}" ng-href="{{item.href}}">\n	<div class="tiles-body">\n		<div class="pull-left"><i class="{{item.classes}}"></i></div>\n		<div class="pull-right"><span class="badge">{{item.titleBarInfo}}</span></div>\n	</div>\n	<div class="tiles-footer">\n		{{item.text}}\n	</div>\n</a>\n')}]),angular.module("theme.template-overrides",[]).config(["$provide",function($provide){$provide.decorator("tabsetDirective",function($delegate){return $delegate[0].templateUrl=function(element,attr){return attr.tabPosition||attr.tabTheme?!attr.tabPosition||"'bottom'"!=attr.tabPosition&&"bottom"!=attr.tabPosition?"templates/themed-tabs.html":"templates/themed-tabs-bottom.html":attr.panelTabs&&void 0!==attr.heading?"templates/panel-tabs.html":attr.panelTabs&&void 0==attr.heading?"templates/panel-tabs-without-heading.html":"templates/themed-tabs.html"},angular.extend($delegate[0].scope,{heading:"@",panelClass:"@",panelIcon:"@",theme:"@tabTheme",position:"@tabPosition"}),$delegate}),$provide.decorator("progressbarDirective",function($delegate){return $delegate[0].templateUrl=function(element,attr){return attr.contextual&&"true"==attr.contextual?"templates/contextual-progressbar.html":"template/progressbar/progressbar.html"},angular.extend($delegate[0].scope,{heading:"@"}),$delegate})}]).run(["$templateCache",function($templateCache){$templateCache.put("footerTemplate.html",'<div ng-show="showFooter" class="ng-grid-footer" ng-style="footerStyle()">\r\n    <div class="col-md-4" >\r\n        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >\r\n            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>\r\n        </div>\r\n        <div class="ngFooterSelectedItems" ng-show="multiSelect">\r\n            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-4" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\r\n            <label class="control-label ng-grid-pages center-block">{{i18n.ngPageSizeLabel}}\r\n               <select class="form-control input-sm" ng-model="pagingOptions.pageSize" >\r\n                      <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\r\n                </select>\r\n        </label>\r\n</div>\r\n     <div class="col-md-4">\r\n        <div class="pull-right ng-grid-pagination">\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><i class="fa fa-angle-double-left"></i></button>\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><i class="fa fa-angle-left"></i></button>\r\n            <label class="control-label">\r\n                   <input class="form-control input-sm" min="1" max="{{currentMaxPages}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>\r\n            </label>\r\n            <span class="ngGridMaxPagesNumber" ng-show="maxPages() > 0">/ {{maxPages()}}</span>\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><i class="fa fa-angle-right"></i></button>\r\n            <button type="button" class="btn btn-default btn-sm" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><i class="fa fa-angle-double-right"></i></button>\r\n        </div>\r\n     </div>\r\n</div>\r\n'),$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="fa" ng-class="$index < value && (r.stateOn || \'fa-star\') || (r.stateOff || \'fa-star-o\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("theme.navigation-controller",[]).controller("NavigationController",["$scope","$location","$timeout","$global",function($scope,$location,$timeout,$global){$scope.menu=[{label:"Dashboard",iconClasses:"fa fa-home",url:"#/index"},{label:"Reports",iconClasses:"fa fa-th-large",children:[{label:"Detailed Report",iconClasses:"fa fa-dot-circle-o",url:"#/detailedreport"},{label:"Geofence Report",iconClasses:"fa fa-road",url:"#/extras-chatroom"},{label:"Phone ON/OFF Report",iconClasses:"fa fa-phone",url:"#/calendar"},{label:"Charging Report",iconClasses:"fa fa-bolt",url:"#/gallery"}]},{label:"Map Features",iconClasses:"fa fa-th-large",children:[{label:"Last Location",iconClasses:"fa fa-users",url:"#/lastlocation"},{label:"History Replay",iconClasses:"fa fa-tablet",url:"#/historytrack"}]},{label:"Media Uploads",iconClasses:"fa fa-folder-open",children:[{label:"Images",iconClasses:"fa fa-file-image-o",url:"#/images"},{label:"Videos",iconClasses:"fa fa-file-image-o",url:"#/images"}]},{label:"Management",iconClasses:"fa fa-th-large",children:[{label:"User Management",iconClasses:"fa fa-users",url:"#/usermanagement"},{label:"Device Management",iconClasses:"fa fa-tablet",url:"#/devicemanagement"}]}];var setParent=function(children,parent){angular.forEach(children,function(child){child.parent=parent,void 0!==child.children&&setParent(child.children,child)})};$scope.findItemByUrl=function(children,url){for(var i=0,length=children.length;length>i;i++){if(children[i].url&&children[i].url.replace("#","")==url)return children[i];if(void 0!==children[i].children){var item=$scope.findItemByUrl(children[i].children,url);if(item)return item}}},setParent($scope.menu,null),$scope.openItems=[],$scope.selectedItems=[],$scope.selectedFromNavMenu=!1,$scope.select=function(item){if(item.open)return void(item.open=!1);for(var i=$scope.openItems.length-1;i>=0;i--)$scope.openItems[i].open=!1;$scope.openItems=[];for(var parentRef=item;null!==parentRef;)parentRef.open=!0,$scope.openItems.push(parentRef),parentRef=parentRef.parent;if(!item.children||item.children&&item.children.length<1){$scope.selectedFromNavMenu=!0;for(var j=$scope.selectedItems.length-1;j>=0;j--)$scope.selectedItems[j].selected=!1;$scope.selectedItems=[];for(var parentRef=item;null!==parentRef;)parentRef.selected=!0,$scope.selectedItems.push(parentRef),parentRef=parentRef.parent}},$scope.$watch(function(){return $location.path()},function(newVal,oldVal){if(0==$scope.selectedFromNavMenu){var item=$scope.findItemByUrl($scope.menu,newVal);item&&$timeout(function(){$scope.select(item)})}$scope.selectedFromNavMenu=!1}),$scope.showSearchBar=function($e){$e.stopPropagation(),$global.set("showSearchCollapsed",!0)},$scope.$on("globalStyles:changed:showSearchCollapsed",function(event,newVal){$scope.style_showSearchCollapsed=newVal}),$scope.goToSearch=function(){$location.path("/extras-search")}}]),angular.module("theme.notifications-controller",[]).controller("NotificationsController",["$scope","$filter",function($scope,$filter){$scope.notifications=[{text:"Server#1 is live",time:"4m","class":"notification-success",iconClasses:"fa fa-check",seen:!0},{text:"New user Registered",time:"10m","class":"notification-user",iconClasses:"fa fa-user",seen:!1},{text:"CPU at 92% on server#3!",time:"22m","class":"notification-danger",iconClasses:"fa fa-bolt",seen:!1},{text:"Database overloaded",time:"30m","class":"notification-warning",iconClasses:"fa fa-warning",seen:!1},{text:"New order received",time:"1h","class":"notification-order",iconClasses:"fa fa-shopping-cart",seen:!0},{text:"Application error!",time:"9d","class":"notification-danger",iconClasses:"fa fa-times",seen:!0},{text:"Installation Succeeded",time:"1d","class":"notification-success",iconClasses:"fa fa-check",seen:!1},{text:"Account Created",time:"2d","class":"notification-success",iconClasses:"fa fa-check",seen:!1}],$scope.setSeen=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.seen=!0},$scope.setUnseen=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.seen=!1},$scope.setSeenAll=function($event){$event.preventDefault(),$event.stopPropagation(),angular.forEach($scope.notifications,function(item){item.seen=!0})},$scope.unseenCount=$filter("filter")($scope.notifications,{seen:!1}).length,$scope.$watch("notifications",function(notifications){$scope.unseenCount=$filter("filter")(notifications,{seen:!1}).length},!0)}]),angular.module("theme.messages-controller",[]).controller("MessagesController",["$scope","$filter",function($scope,$filter){$scope.messages=[{name:"Polly Paton",message:"Uploaded all the files to server",time:"3m","class":"notification-danger",thumb:"assets/demo/avatar/paton.png",read:!1},{name:"Simon Corbett",message:"I am signing off for today",time:"17m","class":"notification-danger",thumb:"assets/demo/avatar/corbett.png",read:!1},{name:"Matt Tennant",message:"Everything is working just fine here",time:"2h","class":"notification-danger",thumb:"assets/demo/avatar/tennant.png",read:!0},{name:"Alan Doyle",message:"Please mail me the files by tonight",time:"5d","class":"notification-danger",thumb:"assets/demo/avatar/doyle.png",read:!1},{name:"Polly Paton",message:"Uploaded all the files to server",time:"3m","class":"notification-danger",thumb:"assets/demo/avatar/paton.png",read:!1},{name:"Simon Corbett",message:"I am signing off for today",time:"17m","class":"notification-danger",thumb:"assets/demo/avatar/corbett.png",read:!1},{name:"Matt Tennant",message:"Everything is working just fine here",time:"2h","class":"notification-danger",thumb:"assets/demo/avatar/tennant.png",read:!0},{name:"Alan Doyle",message:"Please mail me the files by tonight",time:"5d","class":"notification-danger",thumb:"assets/demo/avatar/doyle.png",read:!1}],$scope.setRead=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.read=!0},$scope.setUnread=function(item,$event){$event.preventDefault(),$event.stopPropagation(),item.read=!1},$scope.setReadAll=function($event){$event.preventDefault(),$event.stopPropagation(),angular.forEach($scope.messages,function(item){item.read=!0})},$scope.unseenCount=$filter("filter")($scope.messages,{read:!1}).length,$scope.$watch("messages",function(messages){$scope.unseenCount=$filter("filter")(messages,{read:!1}).length},!0)}]),angular.module("theme.colorpicker-controller",[]).controller("ColorPickerController",["$scope","$global",function($scope,$global){$scope.headerStylesheet="header-inverse.css",$scope.sidebarStylesheet="sidebar-inverse.css",$scope.headerBarHidden=$global.get("headerBarHidden"),$scope.layoutFixed=$global.get("layoutBoxed"),$scope.headerFixed=$global.get("fixedHeader"),$scope.layoutHorizontal=$global.get("layoutHorizontal"),$scope.setHeaderStyle=function(filename,$event){$event.preventDefault(),$event.stopPropagation(),$scope.headerStylesheet=filename},$scope.setSidebarStyle=function(filename,$event){$event.preventDefault(),$event.stopPropagation(),$scope.sidebarStylesheet=filename},$scope.$watch("headerFixed",function(newVal){void 0!==newVal&&$global.set("fixedHeader",newVal)}),$scope.$watch("layoutFixed",function(newVal){$global.set("layoutBoxed",newVal)}),$scope.$watch("layoutHorizontal",function(newVal){$global.set("layoutHorizontal",newVal)}),$scope.$on("globalStyles:changed:layoutBoxed",function(event,newVal){$scope.layoutFixed=newVal}),$scope.$on("globalStyles:changed:layoutHorizontal",function(event,newVal){$scope.layoutHorizontal=newVal})}]),angular.module("theme.dashboard",[]).controller("DashboardController",["$scope",function($scope){$scope.percentages=[53,65,23,99],$scope.randomizePie=function(){$scope.percentages=_.shuffle($scope.percentages)};$scope.plotStatsData=[{data:[[1,1100],[2,1400],[3,1200],[4,800],[5,600],[6,800],[7,700],[8,900],[9,1700],[10,1200]],label:"View Count"}],$scope.plotStatsOptions={series:{lines:{show:!0,lineWidth:1.5,fill:.1},points:{show:!0},shadowSize:0},grid:{labelMargin:10,hoverable:!0,clickable:!0,borderWidth:0},tooltip:!0,tooltipOpts:{defaultTheme:!1,content:"View Count: %y"},colors:["#b3bcc7"],xaxis:{tickColor:"transparent",tickDecimals:0,autoscaleMargin:0,font:{color:"rgba(0,0,0,0.4)",size:11}},yaxis:{ticks:4,tickDecimals:0,tickColor:"rgba(0,0,0,0.04)",font:{color:"rgba(0,0,0,0.4)",size:11},tickFormatter:function(val,axis){return val>999?val/1e3+"K":val}},legend:{labelBoxBorderColor:"transparent"}};$scope.plotRevenueData=[{data:[[1,1100],[2,1400],[3,1200],[4,800],[5,600],[6,800],[7,700],[8,900],[9,700],[10,300]],label:"Revenues"}],$scope.plotRevenueOptions={series:{bars:{show:!0,fill:1,lineWidth:0,barWidth:.6,align:"center"},points:{show:!1},shadowSize:0},grid:{labelMargin:10,hoverable:!0,clickable:!0,borderWidth:0},tooltip:!0,tooltipOpts:{defaultTheme:!1,content:"Revenue: %y"},colors:["#b3bcc7"],xaxis:{tickColor:"transparent",tickDecimals:0,autoscaleMargin:0,font:{color:"rgba(0,0,0,0.4)",size:11}},yaxis:{ticks:4,tickDecimals:0,tickColor:"rgba(0,0,0,0.04)",font:{color:"rgba(0,0,0,0.4)",size:11},tickFormatter:function(val,axis){return val>999?"$"+val/1e3+"K":"$"+val}},legend:{labelBoxBorderColor:"transparent"}},$scope.currentPage=1,$scope.itemsPerPage=7,$scope.accountsInRange=function(){return this.userAccounts.slice(7*this.currentPage,7*this.currentPage+7)},$scope.uaHandle=function($index){this.userAccounts.splice($index,1)},$scope.uaHandleSelected=function(){this.userAccounts=_.filter(this.userAccounts,function(item){return 0==item.rem||void 0==item.rem})};var avatars=["potter.png","tennant.png","johansson.png","jackson.png","jobs.png"];$scope.userAccounts=[{picture:_.shuffle(avatars).shift(),name:"Foreman Bullock",email:"foremanbullock@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Alberta Ochoa",email:"albertaochoa@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Terry Hahn",email:"terryhahn@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Donovan Doyle",email:"donovandoyle@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Stacie Blankenship",email:"stacieblankenship@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Julie Nunez",email:"julienunez@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Lacey Farrell",email:"laceyfarrell@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Stacy Cooke",email:"stacycooke@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Teri Frost",email:"terifrost@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Dionne Payne",email:"dionnepayne@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Kaufman Garrison",email:"kaufmangarrison@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Curry Avery",email:"curryavery@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Carr Sharp",email:"carrsharp@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Cooper Scott",email:"cooperscott@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Juana Spencer",email:"juanaspencer@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Madelyn Marks",email:"madelynmarks@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Bridget Ray",email:"bridgetray@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Santos Christensen",email:"santoschristensen@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Geneva Rivers",email:"genevarivers@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Carmella Bond",email:"carmellabond@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Duke Munoz",email:"dukemunoz@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Ramos Rasmussen",email:"ramosrasmussen@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Maricela Sweeney",email:"maricelasweeney@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Carmen Riley",email:"carmenriley@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Whitfield Hartman",email:"whitfieldhartman@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Jasmine Keith",email:"jasminekeith@geemail.com"},{picture:_.shuffle(avatars).shift(),name:"Baker Juarez",email:"bakerjuarez@geemail.com"}]}]),angular.module("mt.usermanagement-controller",[]).controller("UserManagementController",["$scope","$filter","$http","$location","RESOURCES","UserService","Notification","$translate","$rootScope",function($scope,$filter,$http,$location,RESOURCES,UserService,Notification,$translate,$rootScope){var failTitle,successTitle,failText,successText;$rootScope.user.id;$translate("notification_failure").then(function(translation){failTitle=translation}),$translate("notification_user_created_fail_text").then(function(translation){failText=translation}),$translate("notification_success").then(function(translation){successTitle=translation}),$translate("notification_user_created_success_text").then(function(translation){successText=translation}),$scope.isManagerDataAvailable=!1,$scope.filterOptions={filterText:"",useExternalFilter:!0},$scope.totalServerItems=0,$scope.pagingOptions={pageSizes:[10,50,100],pageSize:10,currentPage:1},$scope.setPagingData=function(data,page,pageSize){var pagedData=data.slice((page-1)*pageSize,page*pageSize);$scope.myData=pagedData,$scope.totalServerItems=data.length,$scope.$$phase||$scope.$apply()},$scope.getUserView=function(id){console.log(id),$location.path("/userview/"+id)},$scope.getPagedDataAsync=function(pageSize,page,searchText){setTimeout(function(){var data;if(searchText){var ft=searchText.toLowerCase();UserService.getManagersByUser().then(function(serviceReponse){200==serviceReponse.status&&(data=serviceReponse.data.filter(function(item){return-1!=JSON.stringify(item).toLowerCase().indexOf(ft)}),data.length>0&&($scope.isManagerDataAvailable=!0),$scope.setPagingData(data,page,pageSize))})}else UserService.getManagersByUser().then(function(serviceReponse){200==serviceReponse.status&&($scope.setPagingData(serviceReponse.data,page,pageSize),serviceReponse.data.length>0&&($scope.isManagerDataAvailable=!0))})},100)},$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage),$scope.$watch("pagingOptions",function(newVal,oldVal){newVal!==oldVal&&newVal.currentPage!==oldVal.currentPage&&$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage,$scope.filterOptions.filterText)},!0),$scope.$watch("filterOptions",function(newVal,oldVal){newVal!==oldVal&&$scope.getPagedDataAsync($scope.pagingOptions.pageSize,$scope.pagingOptions.currentPage,$scope.filterOptions.filterText)},!0),$scope.gridOptions={data:"myData",enablePaging:!0,showFooter:!0,enableRowSelection:!0,totalServerItems:"totalServerItems",pagingOptions:$scope.pagingOptions,filterOptions:$scope.filterOptions,columnDefs:[{field:"displayName",displayName:"Display Name",cellTemplate:'<div><a href="javascript:;" ng-click="getUserView(row.entity.id)">{{row.entity[col.field]}}</a></div>'},{field:"email",displayName:"Email"},{field:"username",displayName:"User Name"},{field:"phone",displayName:"Phone"}]},$scope.addUser=function(user){console.log(user),UserService.create(user,function(result){200==result.status?(Notification.success({title:successTitle,message:successText}),$scope.moveToUserManagement()):Notification.error({title:failTitle,message:failText})})},$scope.moveToUserManagement=function(){$location.path("/usermanagement")}}]),angular.module("tracknack.registration-controller",["frapontillo.bootstrap-duallistbox"]).controller("RegistrationController",["$scope","$routeParams","$http","RESOURCES","$cookieStore","DeviceService","Notification","$translate",function($scope,$routeParams,$http,RESOURCES,$cookieStore,DeviceService,Notification,$translate){var id=$routeParams.id,loggedInUser=$cookieStore.get("user");$scope.user={};var successTitle,successText,loggedInUserId=loggedInUser.id;$translate("notification_success").then(function(translation){successTitle=translation}),$translate("notification_device_mapping").then(function(translation){successText=translation}),DeviceService.getAllDevicesByUserId(loggedInUserId).then(function(devicesArray){console.log(devicesArray),devicesArray.pop(),updateList(devicesArray)}),DeviceService.getAllDevicesByUserId(id).then(function(devicesArray){console.log(devicesArray),$scope.user=devicesArray[devicesArray.length-1],devicesArray.pop(),$scope.deviceListModel=updateSelectedList(devicesArray)});var lastIndex=3;$scope.list=[];var updateSelectedList=function(deviceArray){var arr=[];if(deviceArray)for(var i=0;i<deviceArray.length;i++)arr.push({id:deviceArray[i].imei,text:deviceArray[i].owner+"|"+deviceArray[i].phoneNumber});return arr},updateList=function(deviceArray){if(console.log(deviceArray),deviceArray)for(var i=0;i<deviceArray.length;i++)$scope.list.push({id:deviceArray[i].imei,text:deviceArray[i].owner+"|"+deviceArray[i].phoneNumber})};$scope.mapDevicesToUser=function(deviceListModel){var devices=[];if(deviceListModel){for(var i=0;i<deviceListModel.length>0;i++)devices.push(deviceListModel[i].id);var req={method:"POST",url:RESOURCES.USER_ACTIONS_ENDPOINT+"/mapDevices",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},data:{devices:devices,userid:id}};$http(req).then(function(response){Notification.success({message:successText,title:successTitle})})}},$scope.reset=function(){$scope.deviceListModel=[]},$scope.add=function(){lastIndex++,updateList()},$scope.settings={bootstrap2:!1,filterClear:"Show all!",filterPlaceHolder:"Filter!",moveSelectedLabel:"Move selected only",moveAllLabel:"Move all!",removeSelectedLabel:"Remove selected only",removeAllLabel:"Remove all!",moveOnSelect:!0,preserveSelection:"moved",postfix:"_helperz",selectMinHeight:130,filter:!0,infoAll:"Showing all {0}!",infoFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}!',filterValues:!0},$scope.submitDevices=function(deviceListModel){console.log(deviceListModel)}}]),angular.module("tracknack.homepage-controller",[]).controller("HomePageController",["$scope","$http","RESOURCES",function($scope,$http,RESOURCES){$scope.devices=[{deviceNumber:"9999933907",owner:"Subhendu",latitude:"28.59942104",longitude:"77.37016993",deviceImei:"356489054305375",address:"197Block D, Sector 61Noida, Uttar Pradesh 201301Noida India",battery:"18",phoneNumber:"9999933907"},{deviceNumber:"9560310404",owner:"Saurabh",latitude:"28.59942104",longitude:"77.37016993",deviceImei:"578489054305375",address:"197Block D, Sector 61Noida, Uttar Pradesh 201301Noida India",battery:"88",phoneNumber:"9999933907"},{deviceNumber:"9560310404",owner:"Kartik",latitude:"28.59942104",longitude:"77.37016993",deviceImei:"578489054305375",address:"197Block D, Sector 61Noida, Uttar Pradesh 201301Noida India",battery:"88",phoneNumber:"9999933907"},{deviceNumber:"9560310404",owner:"Kuldeep",latitude:"28.59942104",longitude:"77.37016993",deviceImei:"578489054305375",address:"197Block D, Sector 61Noida, Uttar Pradesh 201301Noida India",battery:"88",phoneNumber:"9999933907"}];var mapOptions={zoom:6,center:new google.maps.LatLng(24.872297,78.242188),mapTypeId:google.maps.MapTypeId.TERRAIN};$scope.map=new google.maps.Map(document.getElementById("map"),mapOptions),$scope.markers=[];var infoWindow=new google.maps.InfoWindow,createReturnMarker=function(info){var marker=new google.maps.Marker({map:$scope.map,position:new google.maps.LatLng(info.latitude,info.longitude),title:info.phoneNumber});return marker.content='<div class="infoWindowContent">'+info.address+"</div>",google.maps.event.addListener(marker,"click",function(){infoWindow.setContent("<h2>"+marker.title+"</h2>"+marker.content),infoWindow.open($scope.map,marker)}),marker};$scope.openInfoWindow=function(e,selectedMarker){e.preventDefault(),google.maps.event.trigger(selectedMarker,"click")},$scope.focusLocation=function(e,device){$scope.map.panTo(new google.maps.LatLng(device.latitude,device.longitude)),$scope.map.setZoom(12),$scope.openInfoWindow(e,createReturnMarker(device))},$scope.userAccounts=[{name:"Foreman Bullock",email:"foremanbullock@geemail.com"},{name:"Alberta Ochoa",email:"albertaochoa@geemail.com"},{name:"Terry Hahn",email:"terryhahn@geemail.com"}]}]),angular.module("tracknack.login-controller",[]).controller("LoginController",["AuthService","$global","$scope","$location","AUTH_EVENTS","$rootScope","Session","visor","$cookieStore","pinesNotifications","$translate",function(AuthService,$global,$scope,$location,AUTH_EVENTS,$rootScope,Session,visor,$cookieStore,pinesNotifications,$translate){$global.set("fullscreen",!0);var loginFailedTitle,loginFailedText;$translate("sticky_login_failed_title").then(function(translation){loginFailedTitle=translation}),$translate("sticky_login_failed_text").then(function(translation){loginFailedText=translation}),$scope.$on("$destroy",function(){$global.set("fullscreen",!1)}),$scope.logIn=function(credentials){AuthService.login(credentials).then(function(user){200==user.status?(console.log(user),$cookieStore.put("user",user.data),$rootScope.user=user.data,visor.setAuthenticated(user.data)):pinesNotifications.notify({title:loginFailedTitle,text:loginFailedText,history:!1,type:"error"})},function(){})}}]),angular.module("tracknack.device-controller",[]).controller("DeviceController",["$scope","$http","RESOURCES","DeviceService","$routeParams","$location",function($scope,$http,RESOURCES,DeviceService,$routeParams,$location){var userDevices=[],deviceId=$routeParams.id;$scope.isDataAvailable="loading",$scope.mode="",DeviceService.getAllDevicesForUser().then(function(serviceResponse){console.log(serviceResponse),200==serviceResponse.status&&(serviceResponse.data.length>0?($scope.deviceList=serviceResponse.data,userDevices=serviceResponse.data,$scope.isDataAvailable=!0):$scope.isDataAvailable="nodata")}),$scope.addDevice=function(deviceData){console.log(deviceData);var device=new Device(deviceData);DeviceService.create(device)},$scope.getAllDevicesForUser=function(){DeviceService.getAllDevicesForUser().then(function(devicesArray){$scope.deviceList=devicesArray})},$scope.moveToDeviceManagement=function(){$location.path("/devicemanagement")},deviceId?($scope.mode="Edit",DeviceService.getDevice(deviceId).then(function(data){$scope.deviceData=data})):$scope.mode="Add"}]),angular.module("tracknack.lastlocation-controller",[]).controller("LastLocationController",["$scope","$http","RESOURCES","$rootScope","UserService","$cookieStore","AuthService","Notification","ConvertFromUNIXtoDateTime",function($scope,$http,RESOURCES,$rootScope,UserService,$cookieStore,AuthService,Notification,ConvertFromUNIXtoDateTime){var mapCanvas,map,infoWindow,lastLocationList,bounds;$scope.markers=[],$scope.devicesList=[];var cookiedata=$cookieStore.get("user");$http.get(RESOURCES.USER_ACTIONS_ENDPOINT+"/"+cookiedata.id).success(function(response,status){$scope.devicesList=response.devices}).error(function(response,status){console.log(response),Notification.error("Please Check your Internet Connection..")}),$scope.openInfoWindow=function(e,selectedMarker){e.preventDefault(),google.maps.event.trigger(selectedMarker,"click")},$scope.focusLocation=function(e,device,map){e.preventDefault(),map.panTo(new google.maps.LatLng(device.latitude,device.longitude)),map.setZoom(16)},$scope.plotMarkersOnMap=function(map){$http.get(RESOURCES.LAST_LOCATION_ENDPOINT+"/"+cookiedata.id).success(function(response,status){if(console.info("New Location....................."),console.log(response),lastLocationList=response){for(var i=0;i<lastLocationList.length;i++){var newTime=ConvertFromUNIXtoDateTime.timeConverter(lastLocationList[i].timestamp);$scope.devicesList&&($scope.devicesList[i].owner=lastLocationList[i].userName,$scope.devicesList[i].latitude=lastLocationList[i].latitude,$scope.devicesList[i].longitude=lastLocationList[i].longitude);var marker=new google.maps.Marker({map:map,position:new google.maps.LatLng(lastLocationList[i].latitude,lastLocationList[i].longitude),title:"<h4>"+lastLocationList[i].userName+"</h4> <h5>At: "+newTime+"</h5>"});marker.content='<div class="infoWindowContent"><table><tr><td><b>Ph No: </b></td><td>'+lastLocationList[i].phoneNumber+"</td></tr><tr><td><b>IMEI: </b></td><td>"+lastLocationList[i].deviceImei+"</td></tr><tr><td><b>Battery: </b></td><td>"+lastLocationList[i].battery+"%</td></tr><tr><td><b>Address: </b></td><td>"+lastLocationList[i].address+"</td></tr></table></div>",google.maps.event.addListener(marker,"click",function(marker,index){return function(){infoWindow.setContent("<h2>"+marker.title+"</h2>"+marker.content),infoWindow.open(map,marker)}}(marker,i)),bounds.extend(marker.position),$scope.markers.push(marker)}map.fitBounds(bounds)}else Notification.error("Check your Internet Connection or Refresh the Page...")}).error(function(response){console.log(response),Notification.error("Error in getting Last Location Update....Check you Internet Connection..")})},$(document).ready(function(){var mapOptions={zoom:16,center:new google.maps.LatLng(24.872297,78.242188),mapTypeId:google.maps.MapTypeId.ROADMAP};setTimeout(function(){mapCanvas=document.getElementById("map"),map=new google.maps.Map(mapCanvas,mapOptions),$scope.map=map,infoWindow=new google.maps.InfoWindow,bounds=new google.maps.LatLngBounds,$scope.plotMarkersOnMap(map)},1e3),setInterval(function(){$scope.plotMarkersOnMap(map)},5e4)})}]),angular.module("tracknack.mediaImages-controller",["ui.bootstrap"]).controller("MediaImagesController",["$scope","RESOURCES","$http","$cookieStore","MediaImageService","Notification","$modal","$routeParams",function($scope,RESOURCES,$http,$cookieStore,MediaImageService,Notification,$modal,$routeParams){var cookiedata=$cookieStore.get("user");$scope.devicesList="";var imei=$routeParams.imei;imei&&($scope.requestData=imei),$http.get(RESOURCES.USER_ACTIONS_ENDPOINT+"/"+cookiedata.id).success(function(response,status){500!==status&&($scope.devicesList=response.devices)}).error(function(response,status){
console.log(response)}),$scope.getMedia=function(){var dateAndTime=$("#mydate").val().split(" - ");MediaImageService.getMediaIamgeList({fromDate:dateAndTime[0],toDate:dateAndTime[1],imei:$scope.requestData},function(data,status){console.log(data),500!==status?$scope.mediaList=data:Notification.error({title:"Not Found",message:"No Data to show for this Account and Date Range!"})})},$scope.openModal=function(size,media){console.log(media);var modalInstance=$modal.open({templateUrl:"myModalContent.html",controller:function($scope,$modalInstance,items){$scope.mediaItem=media,$scope.items=items,$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}},size:size,resolve:{items:function(){return $scope.items}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){})}}]),angular.module("tracknack.historyTrack-controller",[]).controller("HistoryTrackingController",["RESOURCES","$scope","$cookieStore","HistoryTrackService","$http","ConvertFromUNIXtoDateTime","Notification",function(RESOURCES,$scope,$cookieStore,HistoryTrackService,$http,ConvertFromUNIXtoDateTime,Notification){var polyPath,timer,map,cookiedata=$cookieStore.get("user"),dataArr=[],coordinateArray=[];$scope.markers=[];var loopBreaker=0;$scope.devicesList="";var infoWindow,bounds,formValidator=1,coordinateArray=[];polyPath=new google.maps.Polyline({path:coordinateArray,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}),$http.get(RESOURCES.USER_ACTIONS_ENDPOINT+"/"+cookiedata.id).success(function(response,status){500!==status?$scope.devicesList=response.devices:Notification.error("No User/Sub User..")}).error(function(response,status){Notification.error("Please Check your Internet Connection"),console.log(response)}),$(document).ready(function(){var mapOptions={zoom:16,center:new google.maps.LatLng(24.872297,78.242188),mapTypeId:google.maps.MapTypeId.ROADMAP};setTimeout(function(){map=new google.maps.Map(document.getElementById("map"),mapOptions)},1e3),infoWindow=new google.maps.InfoWindow,bounds=new google.maps.LatLngBounds}),$("#test").click(function(){if((""===$scope.requestData||null===$scope.requestData)&&(Notification.error("No User Selected.."),formValidator=0),""===$("#mydate").val()&&(Notification.error("No Date Range Selected.."),formValidator=0),1===formValidator){Notification.primary("Getting Data...Please Wait!");var dateAndTime=$("#mydate").val().split(" - ");HistoryTrackService.getHistoryList({fromDate:dateAndTime[0],toDate:dateAndTime[1],imei:$scope.requestData},function(data,status){if(500!==status){dataArr=data;for(var i=0;i<data.length;i++)coordinateArray.push({lat:parseFloat(dataArr[i].latitude),lng:parseFloat(dataArr[i].longitude)});Notification.info("Click Play to see tracking...")}else Notification.error({title:"Not Found",message:"No Data to show for this Account and Date Range!"})})}}),$("#play").click(function(){function addMarkerWithTimeout(position,timeout,index){timer=window.setTimeout(function(){var newTime=ConvertFromUNIXtoDateTime.timeConverter(dataArr[index].timestamp),latLng=new google.maps.LatLng(coordinateArray[index].lat,coordinateArray[index].lng),marker=new google.maps.Marker({position:new google.maps.LatLng(coordinateArray[index].lat,coordinateArray[index].lng),map:map});$scope.markers.push(marker),bounds.extend(marker.position),marker.content='<div class="infoWindowContent"><table><tr><td><b>Time: </b></td><td>'+newTime+"</td></tr><tr><td><b>IMEI: </b></td><td>"+dataArr[index].deviceImei+"</td></tr><tr><td><b>Battery: </b></td><td>"+dataArr[index].battery+"</td></tr><tr><td><b>Address: </b></td><td>"+dataArr[index].address+"</td></tr><tr><td><b>Activity: </b></td><td>"+dataArr[index].activity+"</td></tr></table></div>",google.maps.event.addListener(marker,"click",function(marker,index){return function(){infoWindow.setContent(marker.content),infoWindow.open(map,marker)}}(marker,index)),marker.setMap(map),map.panTo(latLng)},timeout)}if(clearOverlays(),console.log(coordinateArray),coordinateArray.length>0,polyPath.setMap(map),coordinateArray.length>0){Notification.info("Playing Now...");for(var i=0;i<coordinateArray.length&&0===loopBreaker;i++)addMarkerWithTimeout(dataArr[i],300*i,i)}else Notification.error("No Data to Play History Track...Change the User or Date Range")}),$("#stop").click(function(){loopBreaker=1,window.clearTimeout(timer),clearOverlays(),coordinateArray=[],dataArr=[],polyPath.setMap(null)});var clearOverlays=function(){for(var i=0;i<$scope.markers.length;i++)$scope.markers[i].setMap(null);$scope.markers.length=0,polyPath.setMap(null)}}]),angular.module("tracknack.detailedReport-controller",["ui.bootstrap"]).controller("DetailedReportController",["$scope","RESOURCES","$http","$cookieStore","HistoryTrackService","ConvertFromUNIXtoDateTime","Notification",function($scope,RESOURCES,$http,$cookieStore,HistoryTrackService,ConvertFromUNIXtoDateTime,Notification){var cookiedata=$cookieStore.get("user");$scope.devicesList="",$http.get(RESOURCES.USER_ACTIONS_ENDPOINT+"/"+cookiedata.id).success(function(response,status){500!==status&&($scope.devicesList=response.devices)}).error(function(response,status){console.log(response)}),$("#test").click(function(){var dateAndTime=$("#mydate").val().split(" - ");HistoryTrackService.getHistoryList({fromDate:dateAndTime[0],toDate:dateAndTime[1],imei:$scope.requestData},function(data,status){if(console.log(data),500!==status){for(var i=0;i<data.length;i++)data[i].timestamp=ConvertFromUNIXtoDateTime.timeConverter(data[i].timestamp);$scope.List=data}else Notification.error({title:"Not Found",message:"No Data to show for this Account and Date Range!"})})})}]);var tracknackApp=angular.module("themesApp",["ui.bootstrap","ui.select2","ngGrid","theme.services","theme.directives","theme.navigation-controller","theme.notifications-controller","theme.messages-controller","theme.colorpicker-controller","theme.google_maps","theme.ui-panels","theme.tables-editable","theme.ui-tiles","theme.ui-alerts","theme.ui-progressbars","theme.ui-paginations","theme.tables-ng-grid","theme.pages-controllers","theme.dashboard","theme.templates","theme.template-overrides","ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate","mt.usermanagement-controller","tracknack.registration-controller","tracknack.homepage-controller","tracknack.lastlocation-controller","tracknack.login-controller","pascalprecht.translate","visor","tracknack.device-controller","ui-notification","theme.form-components","theme.form-directives","tracknack.mediaImages-controller","tracknack.historyTrack-controller","tracknack.detailedReport-controller"]).controller("MainController",["$scope","$global","$timeout","progressLoader","$location","$translatePartialLoader","$translate","USER_ROLES","AuthService","visor","$cookieStore","$route","$rootScope",function($scope,$global,$timeout,progressLoader,$location,$translatePartialLoader,$translate,USER_ROLES,AuthService,visor,$cookieStore,$route,$rootScope){$scope.style_fixedHeader=$global.get("fixedHeader"),$scope.style_headerBarHidden=$global.get("headerBarHidden"),$scope.style_layoutBoxed=$global.get("layoutBoxed"),$scope.style_fullscreen=$global.get("fullscreen"),$scope.style_leftbarCollapsed=$global.get("leftbarCollapsed"),$scope.style_leftbarShown=$global.get("leftbarShown"),$scope.style_rightbarCollapsed=$global.get("rightbarCollapsed"),$scope.style_isSmallScreen=!1,$scope.style_showSearchCollapsed=$global.get("showSearchCollapsed"),$scope.style_layoutHorizontal=$global.get("layoutHorizontal"),$translatePartialLoader.addPart("strings"),$translate.use("en-AU")["catch"](function(){$translate.use($translate.fallbackLanguage())}),$scope.toggleLeftBar=function(){return $scope.style_isSmallScreen?$global.set("leftbarShown",!$scope.style_leftbarShown):void $global.set("leftbarCollapsed",!$scope.style_leftbarCollapsed)},$scope.$on("globalStyles:changed",function(event,newVal){$scope["style_"+newVal.key]=newVal.value}),$scope.$on("globalStyles:maxWidth767",function(event,newVal){$timeout(function(){$scope.style_isSmallScreen=newVal,newVal?$global.set("leftbarCollapsed",!1):$global.set("leftbarShown",!1)})}),$scope.currentUser=null,$scope.userRoles=USER_ROLES,$scope.isAuthorized=AuthService.isAuthorized,$scope.setCurrentUser=function(user){$scope.currentUser=user},$scope.isLoggedIn=!0,$scope.logOut=function(){$rootScope.user=void 0,$cookieStore.remove("user"),visor.setUnauthenticated(),$location.url("/login")},$scope.$on("$routeChangeStart",function(e){progressLoader.start(),progressLoader.set(50);var user=$cookieStore.get("user");console.log(user),user?console.log("ALLOW"):(e.preventDefault(),$location.path("/"))}),$scope.$on("$routeChangeSuccess",function(e){progressLoader.end()})}]).config(["$provide","$routeProvider","visorProvider","USER_ROLES","authenticatedOnly",function($provide,$routeProvider,visorProvider,USER_ROLES,authenticatedOnly){visorProvider.homeRoute="/index",visorProvider.loginRoute="/",visorProvider.authenticate=function($cookieStore,$q,$rootScope){var user=$cookieStore.get("user");return user?($rootScope.user=user,$q.when(user)):$q.reject(null)},visorProvider.doOnNotAuthorized=function($location,restrictedUrl){$location.url("/access_denied?prevUrl="+encodeURIComponent(restrictedUrl))},$routeProvider.when("/",{templateUrl:"views/login.html",restrict:function(user){return void 0===user}}).when("/index",{templateUrl:"views/index.html",restrict:authenticatedOnly}).when("/userview/:id",{templateUrl:"views/userview.html",controller:"RegistrationController",restrict:function(user){return!!user}}).when("/access_denied",{templateUrl:"views/access_denied.html",controller:function($scope,$routeParams){$scope.prevUrl=$routeParams.prevUrl}}).when("/:templateFile",{templateUrl:function(param){return"views/"+param.templateFile+".html"}}).when("/deviceview/:id",{templateUrl:"views/deviceview.html",controller:"DeviceController"}).when("/createuser",{templateUrl:"views/createuser.html",restrict:function(user){return user}}).when("/images/:imei",{templateUrl:"views/images.html",controller:"MediaImagesController",restrict:function(user){return user}}).otherwise({redirectTo:"/"})}]).config(function($translateProvider,NotificationProvider){$translateProvider.useLoader("$translatePartialLoader",{urlTemplate:"https://raw.githubusercontent.com/subhendupsingh/Tracknack/master/strings.json"}),NotificationProvider.setOptions({delay:1e4,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"top"})}).filter("timestampToDate",function(){return function(timestamp){var date=new Date(1e3*timestamp),dateObject=date.getFullYear()+"/"+("0"+(date.getMonth()+1)).slice(-2)+"/"+("0"+date.getDate()).slice(-2)+" "+("0"+date.getHours()).slice(-2)+":"+("0"+date.getMinutes()).slice(-2);return dateObject}});tracknackApp.constant("RESOURCES",function(){var base_url="http://23.94.21.18:4000/tracknack-rest-server";return{USER_ACTIONS_ENDPOINT:base_url+"/user",LOGIN_ENDPOINT:base_url+"/user/login",MANAGER_ACTION_ENDPOINT:base_url+"/user/managers",EVENT_ACTIONS_ENDPOINT:base_url+"/eventdata",LAST_LOCATION_ENDPOINT:base_url+"/eventdata/lastLocation",DEVICE_ENDPOINT:base_url+"/device",IMAGE_ENDPOINT:base_url+"/media",HISTORY_ENDPOINT:base_url+"/eventdata/history"}}()),tracknackApp.constant("AUTH_EVENTS",function(){return{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}}()),tracknackApp.constant("USER_ROLES",function(){return{administrator:"ADMIN",manager:"MANAGER",guest:"guest",user:"user"}}()),tracknackApp.factory("AuthService",["$http","Session","RESOURCES",function($http,Session,RESOURCES){var authService={};return authService.login=function(credentials){return $http.post(RESOURCES.LOGIN_ENDPOINT,{username:credentials.email,password:credentials.password}).then(function(res){return res})},authService.isAuthenticated=function(){return Session.userId},authService.isAuthorized=function(authorizedRoles){return angular.isArray(authorizedRoles)||(authorizedRoles=[authorizedRoles]),authService.isAuthenticated()&&-1!==authorizedRoles.indexOf(Session.userRole)},authService}]),tracknackApp.service("Session",[function(){this.create=function(userId,displayName,userRole){this.userId=userId,this.displayName=displayName,this.userRole=userRole},this.destroy=function(){this.userId=null,this.displayName=null,this.userRole=null}}]),tracknackApp.factory("DeviceService",["$http","Session","RESOURCES","$rootScope","$q",function($http,Session,RESOURCES,$rootScope,$q){var deviceService={},userid=$rootScope.user.id;return deviceService.create=function(device){return $http.post(RESOURCES.DEVICE_ENDPOINT,{user:userid,model:device.model,imei:device.imei,phoneNumber:device.phoneNumber,owner:device.owner}).then(function(res,status){return res})},deviceService.getAllDevicesForUser=function(){var devicesArray=[];return $http.get(RESOURCES.USER_ACTIONS_ENDPOINT+"/"+userid).then(function(res){for(var serviceResponse,deffered=$q.defer(),devices=res.data.devices,i=0;i<devices.length;i++)devicesArray.push(new Device(devices[i]));return serviceResponse=new ServiceReponse(res.status,devicesArray),deffered.resolve(serviceResponse),deffered.promise})},deviceService.getAllDevicesByUserId=function(id){var devicesArray=[];return $http.get(RESOURCES.USER_ACTIONS_ENDPOINT+"/"+id).then(function(res){for(var deffered=$q.defer(),devices=res.data.devices,i=0;i<devices.length;i++)devicesArray.push(new Device(devices[i]));var user=new User(res.data);return devicesArray.push(user),devicesArray.length>0&&deffered.resolve(devicesArray),deffered.promise})},deviceService.getDevice=function(deviceid){return $http.get(RESOURCES.DEVICE_ENDPOINT+"/"+deviceid).then(function(res){var device=new Device(res.data);return device})},deviceService}]),tracknackApp.factory("UserService",["$http","Session","RESOURCES","$rootScope","$q","USER_ROLES",function($http,Session,RESOURCES,$rootScope,$q,USER_ROLES){var userService={};console.log($rootScope.user);var role,userid=$rootScope.user.id;$rootScope.user.role&&(role=$rootScope.user.role.roleId);var roleId;return role==USER_ROLES.administrator&&(roleId=2),userService.create=function(user,dataCB){return $http.post(RESOURCES.USER_ACTIONS_ENDPOINT,{tag:"create",username:user.username,password:user.password,displayName:user.displayName,email:user.email,createdById:userid,address:user.address,phone:user.phone,organization:user.organization,roleType:roleId}).then(function(res){return console.log(res),dataCB(res),res})},userService.getManagersByUser=function(){var defered=$q.defer(),managersArray=[];return $http.get(RESOURCES.MANAGER_ACTION_ENDPOINT+"/"+userid).then(function(res){for(var data=res.data,i=0;i<data.length;i++){var manager=new Manager(data[i]);managersArray.push(manager)}if(managersArray.length>0){var serviceResponse=new ServiceReponse(res.status,managersArray);defered.resolve(serviceResponse)}return defered.promise})},userService}]),tracknackApp.factory("MediaImageService",["$http","RESOURCES","$cookieStore",function($http,RESOURCES,$cookieStore){var MediaImages={};$cookieStore.get("user");return MediaImages.getMediaIamgeList=function(dataObj,dataCB){console.log(JSON.stringify(dataObj)),$http.post(RESOURCES.IMAGE_ENDPOINT+"/",JSON.stringify(dataObj)).success(function(data,status){console.log(data),dataCB(data,status)}).error(function(data,status){dataCB(data,status)})},MediaImages}]),tracknackApp.factory("HistoryTrackService",["$http","RESOURCES","$cookieStore",function($http,RESOURCES,$cookieStore){var HistoryObj={};return HistoryObj.getHistoryList=function(dataObj,dataCB){$http.post(RESOURCES.HISTORY_ENDPOINT+"/",JSON.stringify(dataObj)).success(function(data,status){dataCB(data,status)}).error(function(data,status){dataCB(data,status)})},HistoryObj}]),tracknackApp.service("ConvertFromUNIXtoDateTime",function(){this.timeConverter=function(UNIX_timestamp){var a=new Date(1e3*UNIX_timestamp),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year=a.getFullYear(),month=months[a.getMonth()],date=a.getDate(),hour=a.getHours(),min=a.getMinutes(),sec=a.getSeconds(),time=date+" "+month+" "+year+" "+hour+":"+min+":"+sec;return time}});var Device=function(device){this.id=device.id,this.model=device.model,this.phoneNumber=device.phoneNumber,this.imei=device.imei,this.owner=device.owner},User=function(data){this.id=data.id,this.username=data.username,this.email=data.email,this.displayName=data.displayName,this.address=data.address,this.phone=data.phone,this.organization=data.organization,this.password=data.password},Manager=function(data){this.id=data.id,this.email=data.email,this.username=data.username,this.displayName=data.displayName,this.phone=data.phone},ServiceReponse=function(status,data){this.status=status,this.data=data};